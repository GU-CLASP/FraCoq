\newif\ifanon\anontrue

\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}

\usepackage[hyperref]{naaclhlt2019}
\usepackage{natbib}
\usepackage{tabularx}
\usepackage{amsmath}
\usepackage{stmaryrd}
\usepackage{todonotes}
\usepackage{enumitem}
\newlist{lingex}{enumerate}{3}
\setlist[lingex,1]{parsep=0pt,itemsep=1pt,label=(\arabic*),resume=lingexcount}
\newcommand\onelingex[1]{\begin{lingex}\item #1 \end{lingex}}

\newlist{subex}{enumerate}{3}
\setlist[subex,1]{parsep=0pt,itemsep=1pt,font=\bfseries,label=P\arabic*}
\newcommand\hyp{\item[H]}
\newcommand\fracasex[2]{\begin{lingex}\item[(#1)] \begin{subex} #2 \end{subex} \end{lingex} }
\newcommand\jp[1]{\todo[backgroundcolor=blue!10]{JP: #1}}

\newcommand\constant[1]{\mathsf{#1}}

\aclfinalcopy % Uncomment this line for the final submission
%\def\aclpaperid{***} %  Enter the acl Paper ID here

%\setlength\titlebox{5cm}
% You can expand the titlebox if you need extra space
% to show all the authors. Please do not make the titlebox
% smaller than 5cm (the original size); we will check this
% in the camera-ready version and ask you to change it back.

%\newcommand\BibTeX{B{\sc ib}\TeX}


%\usepackage[backend=bibtex,citestyle=authoryear,style=authoryear,natbib]{biblatex}
% new style not compatible with biblatex
%\bibliography{../bbcl_lccm2018/bbcl_lccm2018.bib,iwcs2019}

\usepackage[verbose]{newunicodechar}
\input{../PaperTools/latex/newunicodedefs}

\title{FraCaS: Temporal Analysis}
\author{Jean-Philippe Bernardy \qquad Stergios Chatzikyriakidis \\
  University of Gothenburg\\
  {\tt firstname.lastname@@gu.se} \\}

\date{}

\begin{document}
\maketitle

\section{Introduction}
Stergios
\section{Background}
\paragraph{GF}
If needed
\paragraph{Coq}
If needed
\paragraph{Temporal Semantics}
Stergios
 
\section{Our Compositional Semantics}

We are relying on a largely standard montegovian semantics. In brief,
sentences are interpreted as propositions, verbs and noun-phrases as
predicates.  We use type-raising for noun-phrases to support
quantifiers.

We support additionally various constructinos and phenomena present in
the testsuite, including adjectives, adverbs, nouns, verbs, anaphora,
etc. We direct the reader to our previous work for details \ifanon
(citations anonymized) \else \citet{} \fi, but the particular
treatment of such phenomena is largely independent from our treatment
of time.
%
Here we simply ignore these aspects beyond the fact that they
are handled correctly in most of the case of the FraCaS testsuite.  In
particular, non-temporal anaphoroi are resolved as they should be.

\section{Our Treatment of time}

In montegovian semantics, (intransitive) verbs are one-place
predicates; in types, they are functions from entities to propositions
($e \to t$).  Our basic approach is to generalise verb to take two
additional time parameters, one corresponding with the starting time
of the action and one corresponding to its stopping time. For example,
if John walked between $t_0$ and $t_1$, we would have:
$walk(john,t_0,t_1)$. From now on we will call an interval of time
points $[t_0,t_1]$ a timespan. Every timespan $[t_0,t_1]$ has the
property $t_0 ≤ t_1$ (it starts no later than it stops). We are thus
using a simple newtonian model of time, corresponding to layman
intuition.

In principle, common nouns and adjectives should undergo the same
procedure. For simplicity we will however only consider verbs from now
on. (In fact in our implementation we chose not to modify nouns nor
adjectives to limit the increase in complexity of the formulas.)

\paragraph{temporal context}

We adjust the montegovian semantics so that the interpretation of
every category (propositions, verb phrases, etc.) takes an
\emph{optional} timespan as an additional parameter. This timespan
serves as a time reference for semantics, and we call it a
\emph{temporal context}. This context propagates through the
compositional interpretation down to lexical items with atomic
representation (verbs). By default, every interpretation passes the
temporal context down to its components without changing it. However
some key elements will act on it on nontrivial ways, which we proceed
to detail below.

\newcommand\nospan{\ensuremath{─}}
\newcommand\anyspan{\ensuremath{\_}}
The timespan in the context is
optional because, in certain situations, the semantics is different
depending on whether a timespan has been specified externally or not,
as we explain below. A non-present timespan will be represented as
\nospan{}. If a semantic function does not depend on a timespan, we will write \anyspan{} instead

\paragraph{tenses}

The principal non-trivial manipulation of timespans are tense
markers. In our syntax, inherited from GF, tenses are represented
syntactically as an attribute of the clause.

Example:

A scandinavian won the nobel prize.

useCl past pPos (predVP (detCN (detQuant indefArt numSg) scandinavian\_CN) (complSlash (slashV2a win\_V2) (detCN (detQuant indefArt numSg) nobel\_prize\_CN)))

In our semantics we deal only with present and simple past
tenses. \jp{Is this enough for theory?} Indeed we find that FraCas does not exercise additional
specific tenses (if a more complicated tense is used, the additional
information is also carried by adverbs or adverbial phrases, in a more
specific way.)

The procedure to handle tense annotations is as follows:
\begin{itemize}
\item If the temporal context was modified by an adverb (or an
  averbial clause, such as ``before James swam''), then the tense does
  not create a new interval, but it may constrain it. Typically, a
  past tense adds the constraint that the temporal context ends before
  the timepoint $now$, which is a logical constant representing the current
  time.
\item Otherwise, if the tense is the present, then the temporal
  context becomes the simple $(now,now)$ interval.
\item
  If the tense is the past, then we locally quantify over a time
  interval $[t_0,t_1]$, such that $t_1 < now$.
\end{itemize}

\paragraph{temporal adverbs}

The other single most important source of interesting timespans are
adverbs. Most of the temporal adverbs fall in either of the following
categories:

\begin{enumerate}[align=left,font=\itshape]
\item[exact adverbs] For such adverbs, an exact interval is
  provided. Typical such adverbs specify in fact a single point in
  time (so the start and the end of the interval coincide).

  \[⟦\text{at 5 pm, \(s\)}⟧(\anyspan) = ⟦s⟧(5pm,5pm)\]

\item[existentially quantifying] The majority of temporal adverbs
  existentially quantify over a timespan. Examples include ``since
  1991'', ``in 1996'', ``for two years'', etc. The common theme is to
  introduce the interval and then restrict its bounds or its duration
  in someway. Sometimes the restriction is an equality (``for exactly
  two hours'').

  \begin{multline*}
  ⟦\text{in 1992, \(s\)}⟧(\anyspan) = \\ ∃t_1,t_2.  [t_1,t_2] ⊆ 1992, ⟦s⟧(t_1,t_2)
\end{multline*}
In the FraCaS test suite, we normally do not find several
time-modifying adverbs modifying a single verb. Indeed, sentences such
as ``in 1992, in 1991 john wrote a novel'' are infelicitous. This
justifies ignoring the input timespan in the above interpretation --
we're in particular not interested in modeling felicity with our
semantics, only giving an accurate semantics when the input is
felicitous.
\item[universally quantifying] A few adverbs introduce intervals via a
  universal quantification (sometimes with a constraint). Examples
  include ``always'' and ``never''.

  If there is no explicit time context, then ``always'' has no
  constraint on the interval, otherwise the quantified interval must
  be included in it:
  \begin{multline*}
  ⟦\text{always \(s\)}⟧(t_0,t_1) = \\ ∀t_0',t_1'. [t_0',t_1'] ⊆ [t_0,t_1], ⟦s⟧(t_0',t_1')
\end{multline*}
Note that, here, we do use the input interval, allowing to interpret
phrases such as ``In 1994, Itel was always on time.''.

% A specifically interesting case found in FraCas is the adverbial phrase ``every month'', which we modeled
% \begin{equation}
%   ⟦\text{every month s}⟧(t_0,t_1) = ∀t. [t,t+1month] ⊆ [t_0,t_1], ⟦s⟧(t,t+1month)
% \end{equation}
\end{enumerate}


\paragraph{time references and aspectual classes}

A common theme in the testsuite is the reference to previous
occurences of an event:

\fracasex{262}{
\item	Smith left after Jones left.
\item	Jones left after Anderson left.
\hyp 	Did Smith leave after Anderson left?
}

To be able to conclude that there is entailment, as the testsuite expects, we have to make sure
that the two occurences of ``Jones left'' (in \textbf{P1} and \textbf{P2}) refer to the
same time intervals.

For this purpose we postulate \emph{unicity of action} for certain time-dependent
propositions:

\[\constant{unicity}_P : P (t_1,t_2) → P (t_3,t_4) → (t_1 = t_3) ∧ (t_2 = t_4)\]

Unicity of action holds only if the aspectual class of the proposition
$P$ is \emph{achievement} or \emph{actitivty}.\todo{reference in literature}

(The difference between actitivty and achievement is that for the
latter time intervals can be assumed to be of nil duration. However
this appears to play little role, if any, in our analysis.)

Unicity of action appears to be a non-logical principle. Indeed, it is
quite possible that ``Jones left'' several times. However, it seems
that this principle is never contradicted by the testsuite. As such,
even though unicity of action is only a pragmatic rule, it can be
taken as a valid one \emph{by default}: it is only when we have a
sufficiently constrained situation that one should reject it. Consider
the following discourse:

\begin{enumerate}[parsep=0pt,itemsep=1pt,label=(\arabic*)]
\item Smith left at 1pm.
\item Smith went to its appointment with the lawyer.
\item Smith came back at 2pm
\item Smith left at 4pm.
\end{enumerate}
One would normally not say that there is contradiction. However if (1)
and (4) are presented in isolation, a contradiction can be flagged.

\paragraph{Statives}
\textit{A contrario}, if \(P\) is \emph{stative}, then we get a time-interval subsumption property:

\begin{multline*}
\constant {subsumption}_P :\\ [t_3,t_4] ⊆ [t_1,t_2] → P (t_1,t_2) → P (t_3,t_4)
\end{multline*}
This principle is used to reason about problem (314), below:

\fracasex{314}
{\item	Smith arrived in Paris on the 5th of May, 1995.
\item	Today is the 15th of May, 1995.
\item	She is still in Paris.
\hyp 	Was Smith in Paris on the 7th of May, 1995? 
}

Indeed, from \textbf{P3} we get that Smith was in paris between May
5th and May 15th. Because being in Paris is stative, we also get that
Smith was in Paris in any subinterval.


\paragraph{(un)repeatable achievements}
The principle of using unicity of action interacts well with the usual interpretation of quantifiers (and anaphora).
Indeed, using it, we can refute problem (279), as expected in the testsuite:

\fracasex{279}{
\item	Smith wrote a novel in 1991.
\hyp 	Did Smith write it in 1992?
}
Indeed, following our account, the above (contradictory) inference problem is to be
interperted as

\[\begin{array}{l}
∃x. novel(x) ∧ \\
∃t_1,t_2. [t_1,t_2] ⊆ 1991 ∧ write(smith,x,t_1,t_2) ∧ \\
∃t_3,t_4. [t_3,t_4] ⊆ 1992 ∧ write(smith,x,t_3,t_4) \\
⟶ ⊥ \\
\end{array}
\]
Note here that the scope for the existential is extended beyond the
scope of \textbf{P1}. This extension can work according to
\citet{unger:2011}, and our implemented analysis of anaphora\ifanon (citation anonymized) \else\citep{bernardy_computational_2018,bernardy_wide_2019}\fi.

Thanks to the unicity of action of $write(smith,x,...)$ we find \([t_1,t_2] = [t_3,t_4]\), and due
to the years 1991 and 1992 being disjoint we obtain contradiction.

However, the testsuite instructs that we should \emph{not} be able to refute
problem (280), with the justification that ``wrote a novel'' is a repeatable
accomplishment:

\fracasex{280}{
\item	Smith wrote a novel in 1991.
\item 	Did Smith write a novel in 1992?
\hyp 	Smith wrote a novel in 1992.
}
Here our interpretation is:

\[\begin{array}{l}
∃x. novel(x) ∧ \\
∃t_1,t_2. [t_1,t_2] ⊆ 1991 ∧ write(smith,x,t_1,t_2) ∧ \\
∃y. novel(y) ∧ \\
∃t_3,t_4. [t_3,t_4] ⊆ 1992 ∧ write(smith,y,t_3,t_4) \\
⟶ ⊥ \\
\end{array}
\]
Our analysis does not need to treat this last case specially. Indeed,
even if $write(smith,x,.,.)$ is an activity and thus subject to
unicity of action, in (280), $x$ is quantified existentially; we have
two \emph{different} actions: $write(smith,x,t_1,t_2)$ and
$write(smith,y,t_3,t_4)$, and thus we cannot deduce equality of the
intervals $t_1,t_2$ and $t_3,t_4$. In turn, the hypothesis cannot be refuted.

\paragraph{action-modification verbs}

The final class of lexemes carrying a temporal-dependent semantics are
verbs taking a proposition as argument, like ``finish'', ``start'',
etc. These verbs modify the temporal context in non-trivial
ways. Consider for example ``finish to ...''. The timespan of the
argument of ``finish'' should end within the timespan of the finishing
action:

\begin{multline*}
⟦\text{finish to \(s\)}⟧(t_0,t_1) = \\ ∃(t_0',t_1'). t_1' ∈ [t_0,t_1] ∧ ⟦s⟧(t_0',t_1')
\end{multline*}


\section{Results and evaluation}
\providecommand\ncases[1]{{\ensuremath{^{#1}}}}
\begin{table}[hbt]
  \centering
  \small
\begin{tabularx}{\columnwidth}{Xr@{\,\,}r@{\,\,}r@{\,\,}r@{\,\,}r@{\,\,}r@{\,\,}r}
Section      & {\kern -2em} \#FraCaS
                          & This        & FC2         & FC & MINE & Nut  & LP  \\ \hline
Quantifiers  & 75         & .91        & .96         & .96    & .77  & .53  & .93  \\
             &            & \ncases{74}& \ncases{74} &        &      &      &     \ncases{44} \\
Plurals      & 33         & .64        & .82         & .76    & .67  & .52  & .73 \\
             &            &            &             &     &   &   & \ncases{24} \\
Anaphora     & 28         & .79        & .86         &   -    & -    & -    &  -       \\
Ellipsis     & 52         & .81        & .87         &   -    & -    & -    &  -       \\
Adjectives   & 22         & .95        & .95         & .95    & .68  & .32  & .73 \\
             &            & \ncases{20}&  \ncases{20}&     &   &   &  \ncases{12} \\
Comparatives & 31         & .64        & .87         & .56    & .48  & .45  &  -       \\
Temporal     & 75         & .71        &  -          &   -    &   -  &  -   &  -       \\
Verbs        & 8          & .75        & .75         &   -    & -    & -    &  -       \\
Attitudes    & 13         & .85        & .92         & .85    & .77  & .46  & .92  \\ 
             &            &            &             &        &      &      & \ncases {9}  \\ \hline
Total        & 337        & .78        & .89         & .83    & .69  & .50  & .85  \\
             &            & \ncases{329}& \ncases{259}& \ncases{174}  & \ncases{174}& \ncases{174}& \ncases{89}
  \end{tabularx}
  \caption{Accuracy of our system compared to others.
    ``Ours" refers to the approach presented in this paper. When a
    system does not handle the nominal number of test cases (shown in
    the second column), the actual number of test cases attempted is
    shown below the accuracy figure, in smaller font.  ``FraCoq''
    refers to the work of \citet{bernardy:2017}. ``MINE" refers
    to the approach of \citet{Mineshima:2015}, ``NUT" to the CCG
    system that utilizes the first-order automated theorem prover
    \textit{nutcracker} \cite{bos:2008}, and ``Langpro"
    to the system presented by \citet{Abzianidze:2015}. A dash
    indicates that no attempt was made for the section. }
  \label{tab:results}
\end{table}
\paragraph{interaction with negation and group readings}
\section{Conclusions and Future Work}
Stergios
\section*{Acknowledgements}

The research reported in this paper was supported by grant 2014-39 from the
Swedish Research Council, which funds the Centre for Linguistic Theory and
Studies in Probability (CLASP) in the Department of Philosophy, Linguistics,
and Theory of Science at the University of Gothenburg. We are grateful to
our colleagues in CLASP for helpful discussion of some of the ideas presented
here. We also thank anonymous reviewers for their useful comments on an
earlier draft of the paper.

\bibliographystyle{acl_natbib}

\end{document}
